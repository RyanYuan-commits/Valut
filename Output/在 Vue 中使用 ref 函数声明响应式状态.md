---
type: permanent
banner: Assets/Banner/pexels-picjumbo-com-55570-4457409.jpg
aliases:
  - ref
  - Ref
---
# ğŸŒ æ ¸å¿ƒè§‚ç‚¹

éä¾µå…¥å¼çš„å“åº”å¼ç³»ç»Ÿæ˜¯ Vue æœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€, åœ¨æ•°æ®æ¨¡å‹ä¿®æ”¹æ—¶è§†å›¾ä¹Ÿä¼šåŒæ­¥æ›´æ–°.

---

# ğŸ”– è¯¦ç»†è§£é‡Š

## 1	ref å‡½æ•°ä»‹ç»

åœ¨ç»„åˆå¼ API ä¸­, æ¨èä½¿ç”¨ [ref](https://cn.vuejs.org/api/reactivity-core#ref) å‡½æ•°æ¥å£°æ˜å“åº”å¼çŠ¶æ€, `ref` æ¥æ”¶ä¸€ä¸ª JavaScript å¯¹è±¡, å°†å…¶å°è£…æˆä¸€ä¸ªå¸¦æœ‰ `.value` å±æ€§çš„å“åº”å¼å¯¹è±¡åè¿”å›.

```js
import { ref } from 'vue'

const count = ref(0)
```

è¦åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å“åº”å¼å¯¹è±¡, éœ€è¦åœ¨ `setup` å‡½æ•°ä¸­å£°æ˜å¹¶è¿”å›å®ƒä»¬:

```js
import { ref } from 'vue'

export default {
  // `setup` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é’©å­ï¼Œä¸“é—¨ç”¨äºç»„åˆå¼ APIã€‚
  setup() {
    const count = ref(0)

    // å°† ref æš´éœ²ç»™æ¨¡æ¿
    return {
      count
    }
  }
}
```

å¯ä»¥ä½¿ç”¨ `<script setup>` è¯­æ³•ç³–æ¥ç®€åŒ–ä¸Šé¢çš„æ“ä½œ, åœ¨ `<script setup>` ä¸­å¯¼å…¥æˆ–å£°æ˜ çš„ å˜é‡å’Œå‡½æ•°å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨.

## 2	ref çš„æ·±å±‚å“åº”æ€§

`ref` å¯ä»¥æŒæœ‰ä»»ä½•ç±»å‹çš„å€¼, åŒ…æ‹¬æ·±å±‚åµŒå¥—çš„å¯¹è±¡, æ•°ç»„æˆ–è€… JavaScript å†…ç½®çš„æ•°æ®ç»“æ„, æ¯”å¦‚ Map. ref ä¼šä½¿å®ƒçš„å€¼å…·æœ‰æ·±å±‚å“åº”æ€§. è¿™æ„å‘³ç€å³ä½¿æ”¹å˜åµŒå¥—å¯¹è±¡æˆ–æ•°ç»„æ—¶, å˜åŒ–ä¹Ÿä¼šè¢«æ£€æµ‹åˆ°:

```js
import { ref } from 'vue'

const obj = ref({
 nested: { count: 0 },
 arr: ['foo', 'bar']
})

function mutateDeeply() {
 // ä»¥ä¸‹éƒ½ä¼šæŒ‰ç…§æœŸæœ›å·¥ä½œ
 obj. value. nested. count++
 obj. value. arr. push('baz')
}
```

éåŸå§‹å€¼å°†é€šè¿‡ `reactive()` è½¬æ¢ä¸ºå“åº”å¼ä»£ç†, ä¹Ÿå¯ä»¥é€šè¿‡ `shallow ref` æ¥æ”¾å¼ƒæ·±å±‚å“åº”æ€§. å¯¹äºæµ…å±‚ `ref`, åªæœ‰ `.value` çš„è®¿é—®ä¼šè¢«è¿½è¸ª. æµ…å±‚ `ref` å¯ä»¥ç”¨äºé¿å…å¯¹å¤§å‹æ•°æ®çš„å“åº”æ€§å¼€é”€æ¥ä¼˜åŒ–æ€§èƒ½, æˆ–è€…æœ‰å¤–éƒ¨åº“ç®¡ç†å…¶å†…éƒ¨çŠ¶æ€çš„æƒ…å†µ.

## 3	DOM æ›´æ–°æ—¶æœº

åœ¨ Vue ä¸­, DOM çš„æ›´æ–°å¹¶ä¸æ˜¯å®æ—¶çš„, è€Œæ˜¯ä¼šåœ¨ "next tick" å‘¨æœŸä¸­ç¼“å†²æ‰€æœ‰çŠ¶æ€çš„ä¿®æ”¹, ä¿è¯ä¸ç®¡ä¿®æ”¹äº†å¤šå°‘æ¬¡, æœ€ç»ˆéƒ½ä¼šä½œä¸ºä¸€æ¬¡æ›´æ–°.

å¦‚æœéœ€è¦ç­‰å¾… DOM æ›´æ–°å®Œæˆåå†æ‰§è¡ŒæŸäº›ä»£ç , å¯ä»¥ä½¿ç”¨ [nextTick()](https://cn.vuejs.org/api/general.html#nexttick) å…¨å±€ API:

```js
import { nextTick } from 'vue'

async function increment() {
  count.value++
  await nextTick()
  // ç°åœ¨ DOM å·²ç»æ›´æ–°äº†
}
```

---

# ğŸ“š å‚è€ƒå†…å®¹

[å®˜æ–¹æ–‡æ¡£ - å“åº”å¼åŸºç¡€](https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html)