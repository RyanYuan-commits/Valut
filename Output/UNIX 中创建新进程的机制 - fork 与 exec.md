---
type: permanent
banner: Assets/Banner/pexels-ken-cheung-3355734-5574638.jpg
---
# 🌐 关键词

UNIX, 进程创建

---

# 🔖 详细解释

## 1	fork

`fork()` 是一个系统调用, 作用是创建一个与当前进程几乎完全相同的子进程. 在该系统调用执行后, 系统中有两个进程, 都执行同样的操作; 在应用程序的角度, 父进程内存中的内容被**完全复制**,

```c
pid_t pid = fork(); // 发生分身

if (pid > 0) {
    printf("我是父进程");
} else if (pid == 0) {
    printf("我是子进程");
} else {
	// error
}
```

`fork()` 系统调用会分别被父进程和子进程调用, 父进程调用会返回其本身的 PID, 而子进程调用则会返回 0, 可以以此为根据来执行不同的逻辑.

Linux 使用了写时复制技术来让 fork 操作更高效, 主要原理是将内存的复制操作延迟到父进程或子进程向某个内存页面写入数据之前, 其余情况中, 父子进程共用内存页.

## 2	exec

将一个新程序加载到当前进程的内存并执行, 旧程序的内存页将被刷出, 其内容将替换为新的数据, 然后开始执行新程序.

---

# 📚 参考内容

