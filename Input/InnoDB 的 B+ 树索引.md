---
source: https://juejin.cn/book/6844733769996304392/section/6844733770046668814?utm_source=post_pay_page#heading-9
type: input
banner: Assets/Banner/pexels-walidphotoz-1509582.jpg
---
# 📰 阅读笔记

InnoDB 的数据页编号是不连续的, 只是通过物理的方式连接起来.

索引页可以看作是一个特殊的数据页, 其中存储的记录是页的用户记录中最小的主键值以及页号.

索引页中的记录称为目录项记录, 其他的称为用户记录, 通过记录头中的 record_type 来区分, 

- 0: 普通的用户记录
	
- 1: 目录项记录
	
- 2: 最小记录
	
- 3: 最大记录

## 1	聚簇索引

B+ 树本身就是一个目录, 或者说本身就是一个索引. 它有两个特点:

I: 使用记录主键值的大小进行记录和页的排序, 

- 页内的记录是按照主键的大小顺序排成一个单向链表. 
	
- 各个存放用户记录的页也是根据页中用户记录的主键大小顺序排成一个双向链表. 
	
- 存放目录项记录的页分为不同的层次,在同一层次中的页也是根据页中目录项记录的主键大小顺序排成一个双向链表.

II: B+ 树的叶子节点存储的是完整的用户记录, 所谓完整的用户记录,就是指这个记录中存储了所有列的值(包括隐藏列).

具有这两种特性的 B+ 树称为聚簇索引, 所有完整的用户记录都存放在这个聚簇索引的叶子节点处. 这种聚簇索引并不需要我们在 MySQL 语句中显式的使用 INDEX 语句去创建, InnoDB 存储引擎会自动的为我们创建聚簇索引. 另外有趣的一点是,在 InnoDB 存储引擎中, 聚簇索引就是数据的存储方式, 也就是所谓的索引即数据,数据即索引.

## 2	二级索引

这个 B+树与上边介绍的聚簇索引有几处不同:

I: 使用记录 c2 列的大小进行记录和页的排序, 这包括三个方面的含义:

- 页内的记录是按照 c2 列的大小顺序排成一个单向链表.

- 各个存放用户记录的页也是根据页中记录的 c2 列大小顺序排成一个双向链表.

- 存放目录项记录的页分为不同的层次, 在同一层次中的页也是根据页中目录项记录的 c2 列大小顺序排成一个双向链表.

II: B+树的叶子节点存储的并不是完整的用户记录, 而只是 c2 列 + 主键这两个列的值.

III: 目录项记录中不再是主键 + 页号的搭配, 而变成了 c2 列 + 页号的搭配.

## 3	联合索引

可以同时以多个列的大小作为排序规则, 也就是同时为多个列建立索引, 比方说我们想让 B+ 树按照 c2 和 c3 列的大小进行排序, 这个包含两层含义:

- 先把各个记录和页按照 c2 列进行排序.
	
- 在记录的 c2 列相同的情况下, 采用 c3 列进行排序

---

# 💭 我的思考

这个观点如何与我已知的知识产生联系? 它让我想到了什么?